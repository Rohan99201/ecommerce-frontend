<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Details</title>
    <link rel="stylesheet" href="./styles.css">
    <script src="https://assets.adobedtm.com/ac7e16474f69/f877808f66e3/launch-df329f115936.min.js" async></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NJT9GRQB');</script>
    <!-- End Google Tag Manager -->
    <script src="https://cmp.osano.com/16BjtNUb3fNpPJRSv/edf2f197-ad00-4615-901d-0e2721cf4a45/osano.js"></script>
    <script type="text/javascript">
var utag_data = {
  tealium_event : "", // 
  event_category : "", // 
  event_action : "", // 
  event_label : "", // 
  view_item : "", // 
  view_cart : "", // 
  add_to_cart : "", // 
  add_shipping_info : "", // 
  purchase : "", // 
  page_name : "", // Contains a user-friendly name for the page.
  page_section : "", // Contains a user-friendly page section, e.g. 'configuration section'.
  page_category : "", // Contains a user-friendly page category, e.g. 'appliance page'.
  page_subcategory : "", // Contains a user-friendly page subcategory, e.g. 'refrigerator page'.
  page_type : "", // Contains a user-friendly page type, e.g. 'cart page'.
  product_id : "", // Contains product ID(s) - multiple values should be comma-separated.
  product_sku : "", // Contains product SKU(s) - multiple values should be comma-separated.
  product_name : "", // Contains product name(s) - multiple values should be comma-separated.
  product_brand : "", // Contains product brand(s) - multiple values should be comma-separated.
  product_category : "", // Contains product category(s) - multiple values should be comma-separated.
  product_subcategory : "", // Contains product subcategory(s) - multiple values should be comma-separated.
  product_unit_price : "", // Contains product unit price(s) - multiple values should be comma-separated.
  product_list_price : "", // Contains product list price(s) before discount - multiple values should be comma-separated.
  product_quantity : "", // Contains product quantity(s) - multiple values should be comma-separated.
  product_discount : "", // Contains product discount(s) - multiple values should be comma-separated.
  order_id : "", // Contains the order or transaction ID.
  order_total : "", // Contains the order total value.
  order_subtotal : "", // Contains the order subtotal (not containing taxes &amp; shipping).
  order_payment_type : "", // Contains the order payment type.
  order_discount : "", // Contains the order discount (if any).
  order_shipping : "", // Contains the order shipping value.
  order_tax : "", // Contains the order tax amount.
  order_currency : "", // Contains the currency associated with the transaction, e.g. 'USD'.
  order_coupon_code : "", // Contains the order coupon code.
  order_coupon_discount : "", // Contains the order coupon discount.
  order_store : "", // Contains identification information for a store.
  order_type : "", // Contains type of order/cart.
  customer_id : "", // Contains the customer ID.
  customer_city : "", // Contains the customer city.
  customer_state : "", // Contains the customer state.
  customer_zip : "", // Contains the customer zip/postal code.
  customer_country : "", // Contains the customer country.
  customer_email : "", // Contains the customer email.
  customer_type : "", // Contains the customer type.
  customer_username : "", // Contains the customer's username, e.g. johndoe38.
  customer_status : "", // Contains the customer's status, e.g. 'logged in'.
  iq_event_id : "", // A system variable that contains the ID of an iQ event and used to fire a tag when an event happens.
  percent_visible : "", // 
  duration : "", // 
  metric_value : "", // 
  metric_delta : "", // 
  metric_id : "", // 
  metric_rating : "", // 
  metric_valueRounded : "", // 
  metric_deltaRounded : "", // 
  effective_connection_type : "", // 
  save_data : "", // 
  width : "", // 
  height : "", // 
  debugTarget : "", // 
  debugEvent : "", // 
  debugTiming : "", // 
  eventTime : "", // 
  value : "", // 
  currency : "", // 
  items : "", // 
  ss_referrer : "", // 
  ss_page_title : "", // 
  click_element : "", // 
  percent_scrolled : "", // 
  link_text : "", // 
  link_url : "", // 
  item_list_id : "", // 
  item_list_name : "", // 
  tax : "", // 
  shipping : "", // 
  transaction_id : "", // 
  conversion_ID : "", // 
  debug_mode : "", // 
  clicked_url : "", // 
  click_test : "", // 
  site_section : "", // 
  site_subsection1 : "", // 
  site_subsection2 : "" // 
}
</script>
    <script type="text/javascript">
        (function(a,b,c,d){
          a='https://tags.tiqcdn.com/utag/nabler-sandbox/rohan.c/prod/utag.js';
          b=document;c='script';d=b.createElement(c);
          d.src=a;d.type='text/java'+c;d.async=true;
          a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
        })();
    </script>

</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJT9GRQB"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="container">
        <h1>Transaction Details</h1>
        <div id="transaction-details"></div>
        <button onclick="window.location.href='index.html'">Back to Store</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const transactionId = params.get("transactionId");
            const productId = params.get("productId");
            const productName = params.get("productName");
            const productPrice = params.get("productPrice");
            const productListPrice = params.get("productListPrice");

            if (transactionId && productId && productName) {
                document.getElementById("transaction-details").innerHTML = `
                    <p><strong>Transaction ID:</strong> ${transactionId}</p>
                    <p><strong>Product ID:</strong> ${productId}</p>
                    <p><strong>Product Name:</strong> ${productName}</p>
                    <p><strong>Price:</strong> ${productPrice}</p>
                    <p><strong>List Price:</strong> ${productListPrice}</p>
                `;

                // âœ… Tealium Purchase Event - Corrected
                window.utag_data = {
                    tealium_event: "purchase",
                    transaction_id: transactionId,
                    product_id: productId,
                    product_name: productName,
                    product_price: productPrice,
                    product_list_price: productListPrice
                };

                if (typeof utag !== "undefined" && typeof utag.link === "function") {
                    utag.link(window.utag_data);
                    console.log("Tealium purchase event sent:", window.utag_data);
                } else {
                    console.warn("Tealium utag.link is not available.");
                }
            } else {
                document.getElementById("transaction-details").innerHTML = "<p>No transaction found.</p>";
            }
        });
    </script>
</body>
</html>
